schema: '2.0'
stages:
  make_data:
    cmd: python src/make_data.py --out data/processed/telco_churn.csv
    deps:
    - path: data/raw/telco_churn.csv
      hash: md5
      md5: 006527876bfe18c977d74eb4bc59443f
      size: 873370
    - path: src/make_data.py
      hash: md5
      md5: 74eed17ad71e7516e65caab3341551ff
      size: 1653
    outs:
    - path: data/processed/telco_churn.csv
      hash: md5
      md5: ac40be7770ac4b2e22a43d2ec75a2bad
      size: 883371
  preprocess:
    cmd: python src/preprocess_data.py --input data/processed/telco_churn.csv 
      --out data/prepared/telco_churn_prepared.csv
    deps:
    - path: data/processed/telco_churn.csv
      hash: md5
      md5: ac40be7770ac4b2e22a43d2ec75a2bad
      size: 883371
    - path: src/preprocess_data.py
      hash: md5
      md5: 9c4a8df2586273ba9984d06e6592329f
      size: 2576
    outs:
    - path: data/prepared/telco_churn_prepared.csv
      hash: md5
      md5: 004465a82c600845f99d035943fe597f
      size: 1022255
  train_logreg:
    cmd: python src/train.py --data data/prepared/telco_churn_prepared.csv 
      --model models/telco_logreg.pkl --params params/logreg.yaml --metrics 
      metrics/logreg_metrics.json
    deps:
    - path: data/prepared/telco_churn_prepared.csv
      hash: md5
      md5: 004465a82c600845f99d035943fe597f
      size: 1022255
    - path: params/logreg.yaml
      hash: md5
      md5: a2f029293b6948a44cf6af2c81507621
      size: 1327
    - path: src/train.py
      hash: md5
      md5: 61191b5c113da3703accad6dc79aed43
      size: 5666
    params:
      params/logreg.yaml:
        model.C: 10.0
        model.fit_intercept: true
        model.max_iter: 100
        model.penalty: l2
        model.random_state: 42
        model.solver: lbfgs
        split.test_size: 0.2
    outs:
    - path: metrics/logreg_metrics.json
      hash: md5
      md5: 2e103c5c3f904a5fd7b8ca68e45c6ce1
      size: 157
    - path: models/telco_logreg.pkl
      hash: md5
      md5: 742be0daa22dc57e25d7bc7a5db4d267
      size: 1759
  train_tree:
    cmd: python src/train.py --data data/prepared/telco_churn_prepared.csv 
      --model models/telco_tree.pkl --params params/decision_tree.yaml --metrics
      metrics/tree_metrics.json
    deps:
    - path: data/prepared/telco_churn_prepared.csv
      hash: md5
      md5: 004465a82c600845f99d035943fe597f
      size: 1022255
    - path: params/decision_tree.yaml
      hash: md5
      md5: af3189636f3178982f6562df53ffb4fc
      size: 1205
    - path: src/train.py
      hash: md5
      md5: 61191b5c113da3703accad6dc79aed43
      size: 5666
    params:
      params/decision_tree.yaml:
        model.criterion: gini
        model.max_depth: 5
        model.min_samples_leaf: 1
        model.min_samples_split: 2
        model.random_state: 42
        split.test_size: 0.2
    outs:
    - path: metrics/tree_metrics.json
      hash: md5
      md5: 254d8652e8ff84b222575a8d7f009662
      size: 159
    - path: models/telco_tree.pkl
      hash: md5
      md5: 72d346ffbed9a4fe710922f4ac46181f
      size: 7049
  evaluate_logreg:
    cmd: python src/evaluate.py --model models/telco_logreg.pkl --data 
      data/prepared/telco_churn_prepared.csv --metrics reports/logreg_eval.json 
      --plot reports/roc_logreg.png
    deps:
    - path: data/prepared/telco_churn_prepared.csv
      hash: md5
      md5: 004465a82c600845f99d035943fe597f
      size: 1022255
    - path: models/telco_logreg.pkl
      hash: md5
      md5: 742be0daa22dc57e25d7bc7a5db4d267
      size: 1759
    - path: src/evaluate.py
      hash: md5
      md5: a9592892ef097dce5584975bf9024954
      size: 1915
    outs:
    - path: reports/logreg_eval.json
      hash: md5
      md5: bbc783d394f80671d2c975c56cd32b3f
      size: 158
    - path: reports/roc_logreg.png
      hash: md5
      md5: 4351d831f7ff5b3ab37282d4f60cba5a
      size: 26104
  evaluate_tree:
    cmd: python src/evaluate.py --model models/telco_tree.pkl --data 
      data/prepared/telco_churn_prepared.csv --metrics reports/tree_eval.json 
      --plot reports/roc_tree.png
    deps:
    - path: data/prepared/telco_churn_prepared.csv
      hash: md5
      md5: 004465a82c600845f99d035943fe597f
      size: 1022255
    - path: models/telco_tree.pkl
      hash: md5
      md5: 72d346ffbed9a4fe710922f4ac46181f
      size: 7049
    - path: src/evaluate.py
      hash: md5
      md5: a9592892ef097dce5584975bf9024954
      size: 1915
    outs:
    - path: reports/roc_tree.png
      hash: md5
      md5: ec3e08d6c4d22c4190c04cdc13f4eca7
      size: 27225
    - path: reports/tree_eval.json
      hash: md5
      md5: 5c3269902e9b521dae7c8c44bdef6f6d
      size: 159
